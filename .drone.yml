kind: pipeline
name: AstroJS

steps:
- name: build astro
  image: node
  commands:
  - npm install
  - npm run build
- name: push to dockerhub
  image: plugins/docker
  settings:
    username: sford1sudo
    password:
      from_secret: dhubpass
    repo: sford1sudo/astro
    tags: latest
- name: slack notification
  image: plugins/slack
  settings:
    webhook: https://hooks.slack.com/services/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
    channel: nothin
